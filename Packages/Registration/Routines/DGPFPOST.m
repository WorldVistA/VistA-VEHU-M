DGPFPOST  ;SGU/GJW - DG*5.3*1005 post-install;1/30/20
 ;;5.3;Registration;**1005**;Jan 30, 2020;Build 57
 ;Calls to ADD^XPAR and CHG^XPAR supported by ICR #2263
 ;
EN ;
 N DGSITE,DGLINE,DGI,DGNUM,DGRTR,DGERR
 S DGSITE=$P($$SITE^VASITE(),U,3)
 D EN^DDIOL("Updating DG PRF REGIONAL ROUTER")
 F DGI=1:1 D  Q:DGLINE=""
 .S DGLINE=$P($T(ROUTERS+DGI),";;",2)
 .S DGNUM=$P(DGLINE,U),DGRTR=$P(DGLINE,U,2)
 .I DGNUM=DGSITE D  Q
 ..D ADD^XPAR("SYS","DG PRF REGIONAL ROUTER",1,DGRTR,.DGERR)
 ..I +DGERR>0 D CHG^XPAR("SYS","DG PRF REGIONAL ROUTER",1,DGRTR,.DGERR)
 ;
 D BUG^DGY994PO  ;bug cleanup from original DG*5.3*994 post install
 ;
 ;Next add, OEHRMTIERIISupport@domain.ext as an external recipient to 
 ;the mail group DGPF APPLICATION ERRORS.
 N DGFDA,DGIEN,DGERR
 D EN^DDIOL("Adding OEHRM TIER II SUPPORT as a remote member of DGPF APPLICATION ERRORS")
 S DGFDA(3.8,"?1,",.01)="DGPF APPLICATION ERRORS"
 S DGFDA(3.812,"?+2,?1,",.01)="OEHRMTIERIISupport@domain.ext"
 D UPDATE^DIE(,"DGFDA","DGIEN","DGERR")
 Q
 ;
CERNER ;
 D EN^DDIOL("Configuring VACRNR")
 I $$FIND1^DIC(4,,"MX","CERNER")=0 G CRNROUT
 ;Add VACRNR link (minus the IP and port) if it's not already there.
 K DGFDA,DGERR,DGIEN
 S DGFDA(870,"?+1,",.01)="VACRNR"
 S DGFDA(870,"?+1,",.02)="CERNER"
 ;S DGFDA(870,"?1,",.08)=<domain name>
 S DGFDA(870,"?+1,",4.5)=1             ;autostart
 S DGFDA(870,"?+1,",2)="TCP"           ;LLP type
 S DGFDA(870,"?+1,",3)="NC"            ;device type
 S DGFDA(870,"?+1,",21)=10             ;queue size
 S DGFDA(870,"?+1,",200.021)="R"       ;exceed re-transmit action
 S DGFDA(870,"?+1,",200.05)=20         ;ACK timeout
 S DGFDA(870,"?+1,",200.08)=2.3        ;protocol version ID
 ;S DGFDA(870,"?+1,",400.02)=<port>
 S DGFDA(870,"?+1,",400.03)="C"        ;TCP/IP service type
 S DGFDA(870,"?+1,",400.04)="N"        ;non-persistent
 S DGFDA(870,"?+1,",400.07)="Y"        ;say HELO
 D UPDATE^DIE("E","DGFDA","DGIEN","DGERR")
 ;
CRNROUT ;skip to here if CERNER isn't in the INSTITUTION file
ROUTERS ;
 ;;358^DGVDFRR11
 ;;402^DGVDFRR42
 ;;405^DGVDFRR42
 ;;436^DGVDFRR12
 ;;438^DGVDFRR2
 ;;442^DGVDFRR12
 ;;459^DGVDFRR11
 ;;460^DGVDFRR41
 ;;463^DGVDFRR11
 ;;501^DGVDFRR12
 ;;502^DGVDFRR2
 ;;503^DGVDFRR41
 ;;504^DGVDFRR11
 ;;506^DGVDFRR3
 ;;508^DGVDFRR3
 ;;509^DGVDFRR3
 ;;512^DGVDFRR41
 ;;515^DGVDFRR3
 ;;516^DGVDFRR3
 ;;517^DGVDFRR3
 ;;518^DGVDFRR42
 ;;519^DGVDFRR11
 ;;520^DGVDFRR2
 ;;521^DGVDFRR3
 ;;523^DGVDFRR42
 ;;526^DGVDFRR42
 ;;528^DGVDFRR41
 ;;528^DGVDFRR42
 ;;529^DGVDFRR41
 ;;531^DGVDFRR11
 ;;534^DGVDFRR3
 ;;537^DGVDFRR2
 ;;538^DGVDFRR3
 ;;539^DGVDFRR3
 ;;540^DGVDFRR41
 ;;541^DGVDFRR3
 ;;542^DGVDFRR41
 ;;544^DGVDFRR3
 ;;546^DGVDFRR3
 ;;548^DGVDFRR3
 ;;549^DGVDFRR2
 ;;550^DGVDFRR3
 ;;552^DGVDFRR3
 ;;553^DGVDFRR3
 ;;554^DGVDFRR12
 ;;556^DGVDFRR2
 ;;557^DGVDFRR3
 ;;558^DGVDFRR3
 ;;561^DGVDFRR42
 ;;562^DGVDFRR41
 ;;564^DGVDFRR2
 ;;565^DGVDFRR3
 ;;568^DGVDFRR2
 ;;570^DGVDFRR11
 ;;573^DGVDFRR3
 ;;575^DGVDFRR12
 ;;578^DGVDFRR2
 ;;580^DGVDFRR2
 ;;581^DGVDFRR3
 ;;583^DGVDFRR3
 ;;585^DGVDFRR2
 ;;586^DGVDFRR2
 ;;589^DGVDFRR2
 ;;590^DGVDFRR3
 ;;593^DGVDFRR12
 ;;595^DGVDFRR41
 ;;596^DGVDFRR3
 ;;598^DGVDFRR2
 ;;600^DGVDFRR11
 ;;600^DGVDFRR12
 ;;603^DGVDFRR3
 ;;605^DGVDFRR12
 ;;607^DGVDFRR2
 ;;608^DGVDFRR42
 ;;610^DGVDFRR3
 ;;612^DGVDFRR11
 ;;613^DGVDFRR41
 ;;614^DGVDFRR3
 ;;618^DGVDFRR2
 ;;619^DGVDFRR3
 ;;620^DGVDFRR42
 ;;621^DGVDFRR3
 ;;623^DGVDFRR2
 ;;626^DGVDFRR3
 ;;629^DGVDFRR2
 ;;630^DGVDFRR42
 ;;631^DGVDFRR42
 ;;632^DGVDFRR42
 ;;635^DGVDFRR2
 ;;636^DGVDFRR2
 ;;637^DGVDFRR3
 ;;640^DGVDFRR11
 ;;642^DGVDFRR41
 ;;644^DGVDFRR12
 ;;646^DGVDFRR41
 ;;648^DGVDFRR11
 ;;649^DGVDFRR12
 ;;650^DGVDFRR42
 ;;652^DGVDFRR3
 ;;653^DGVDFRR11
 ;;654^DGVDFRR11
 ;;655^DGVDFRR3
 ;;656^DGVDFRR2
 ;;657^DGVDFRR2
 ;;658^DGVDFRR3
 ;;659^DGVDFRR3
 ;;660^DGVDFRR12
 ;;662^DGVDFRR12
 ;;663^DGVDFRR11
 ;;664^DGVDFRR12
 ;;666^DGVDFRR12
 ;;667^DGVDFRR2
 ;;668^DGVDFRR11
 ;;671^DGVDFRR2
 ;;672^DGVDFRR3
 ;;673^DGVDFRR3
 ;;674^DGVDFRR2
 ;;675^DGVDFRR3
 ;;676^DGVDFRR2
 ;;678^DGVDFRR12
 ;;679^DGVDFRR3
 ;;687^DGVDFRR11
 ;;688^DGVDFRR41
 ;;689^DGVDFRR42
 ;;691^DGVDFRR11
 ;;692^DGVDFRR11
 ;;693^DGVDFRR41
 ;;695^DGVDFRR2
 ;;740^DGVDFRR2
 ;;756^DGVDFRR12
 ;;757^DGVDFRR3
 ;;
