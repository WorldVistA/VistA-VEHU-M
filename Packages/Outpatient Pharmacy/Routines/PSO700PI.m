PSO700PI ;ALB/ASF - eRx 700 POST INSTALL; 10/01/2022 11:24Am
 ;;7.0;OUTPATIENT PHARMACY;**700**;DEC 1997;Build 261
 ;
PRE ; Pre-Install Entry point
 ;
 S DIK="^ORD(101,"
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS QUEUE HIDDEN ACTIONS MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT QUEUE HIDDEN ACTIONS MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL PATIENTS QUEUE HIDDEN ACTIONS MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS RXCHANGEREQUEST ONLY",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS RXCHANGERESPONSE ONLY",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS RXFILL ONLY",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS RXRENAWLRESPONSE ONLY",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS RXRENEWALREQUEST ONLY",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS INBOUND ERROR ONLY",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS NEWRX ONLY",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS OUTBOUND ERROR ONLY",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS CANCELRX ONLY",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS CANCELRXRESPONSE ONLY",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS ALL MESSAGE TYPES",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS SHOW/HIDE DETAILS",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX PATIENT VALIDATION MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX HIDDEN ACTIONS",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX PROVIDER VALIDATION MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL PATIENTS CHANGE LOOK BACK DAYS",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL PATIENTS CHANGE VIEW",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL PATIENTS GROUP BY CS",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL PATIENTS NEXT PATIENT",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL PATIENTS QUEUE HIDDEN ACTIONS MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL PATIENTS QUEUE MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL PATIENTS REFRESH LIST",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL PATIENTS REMOVE FILTERS",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL PATIENTS RX VIEW SWITCH",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL PATIENTS SEARCH QUEUE",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL PATIENTS SELECT",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL PATIENTS SORT BY DOB",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL PATIENTS SORT BY ELAPSED DAYS",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL PATIENTS SORT BY PATIENT NAME",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS CHANGE LOOK BACK DAYS",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS CHANGE VIEW",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS GROUP BY CS",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS PATIENT CENTRIC VIEW SWITCH",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS QUEUE HIDDEN ACTIONS MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS QUEUE MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS REFRESH LIST",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS REMOVE FILTERS",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS SEARCH QUEUE",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS SELECT",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS SORT BY DRUG NAME",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS SORT BY PATIENT DOB",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS SORT BY PATIENT NAME",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS SORT BY PROVIDER NAME",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS SORT BY RECEIVED DATE",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS SORT BY STATUS",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX HISTORY LOG MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX PATIENT VALIDATION MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT BATCH HOLD",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT BATCH UNHOLD",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT CHANGE LOOK BACK DAYS",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT CHANGE VIEW",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT GROUP BY CS",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT MATCH PATIENT",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT NEXT PATIENT",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT QUEUE HIDDEN ACTIONS MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT QUEUE MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT SELECT",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT SHOW/HIDE DETAILS",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT SORT BY ALL MATCHES",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT SORT BY DRUG MATCH",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT SORT BY DRUG NAME",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT SORT BY ERX ID",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT SORT BY PATIENT MATCH",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT SORT BY PROVIDER MATCH",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT SORT BY PROVIDER NAME",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT SORT BY RECEIVED DATE",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT SORT BY STATUS",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT VALIDATE PATIENT",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE RXRENEWAL REQUEST",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT INCLUDE ALL STATUSES",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT JUMP TO BACKDOOR",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ENTER PROGRESS NOTES",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT SHOW/HIDE SIG",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT VERIFY PATIENT",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX VIEW HISTORY LOG",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX DRUG VALIDATION HIDDEN MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX PATIENT ALLERGIES VIEW",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX PATIENT VALIDATION HIDDEN MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX PATIENT ALLERGIES MENU",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX PATIENT ALLERGIES VISTA PATIENT",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX ALL RXS CHANGE LOOKBACK DAYS",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX SINGLE PATIENT REFRESH",0)) I DA D ^DIK
 S DA=$O(^ORD(101,"B","PSO ERX UN-PROCESS",0)) I DA D ^DIK
 Q
 ;
EN ; Entry Point
 N DIC,DIK,DR,X,Y,BRIEF
 D BMES^XPDUTL("Starting post-install for PSO*7*700")
 ;
 I '$D(^PS(52.35,1)) D
 . S ^PS(52.35,1,0)="ERX HOLDING QUEUE PREFERENCES"
 . S ^PS(52.35,"B","ERX HOLDING QUEUE PREFERENCES",1)=""
 . S $P(^PS(52.35,0),"^",3,4)="1^1"
 ;
 S DIC="^PS(52.45,",DIC(0)=""
 ; New Hold codes
 S X="HAL",BRIEF="NO PATIENT ALLERGY ASSESSMENT",TYPE="ERX" D ADD
 S X="HEL",BRIEF="PATIENT ELIGIBILITY ISSUE",TYPE="ERX" D ADD
 S X="HUR",BRIEF="UN-REMOVED",TYPE="ERX" D ADD
 ;
 ; Building "APATVPAT" x-reference
 I '$D(^PS(52.49,"APATVPAT")) D
 . S DIK="^PS(52.49,",DIK(1)=".04^APATVPAT" D ENALL^DIK
 ;
 ; Building "APRVVPRV" x-reference
 I '$D(^PS(52.49,"APRVVPRV")) D
 . S DIK="^PS(52.49,",DIK(1)="2.1^APRVVPRV" D ENALL^DIK
 ;
 ; Building "AVPAT" x-reference
 I '$D(^PS(52.49,"AVPAT")) D
 . S DIK="^PS(52.49,",DIK(1)=".05^AVPAT" D ENALL^DIK
 ;
 ; Building "AVPRV" x-reference
 I '$D(^PS(52.49,"AVPRV")) D
 . S DIK="^PS(52.49,",DIK(1)="2.3^AVPRV" D ENALL^DIK
 ;
 ; Building "ADRGVRX" x-reference
 K ^PS(52.49,"ADRGVRX")
 I '$D(^PS(52.49,"ADRGVRX")) D
 . S DIK="^PS(52.49,",DIK(1)=".13^ADRGVRX" D ENALL^DIK
 ;
 ; Building "AMSGDTSTS" x-reference
 I '$D(^PS(52.49,"AMSGDTSTS")) D
 . S DIK="^PS(52.49,",DIK(1)=".03^AMSGDTSTS" D ENALL^DIK
 ;
 D BMES^XPDUTL("Post-install for PSO*7*700 completed successfully")
 Q
 ;
ADD ;add entry
 I $D(^PS(52.45,"B",X)) Q
 S DIC("DR")=".02///"_BRIEF_";.03///"_TYPE
 D FILE^DICN
 Q
